<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Work Day Scheduler</title>

    <!-- Added link to the jQuery library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://momentjs.com/downloads/moment.js"></script>
</head>

<body>

    <div id="scheduler"></div>


    <!-- Here we're adding a bit of CSS -->
    <style>
        #scheduler {
            text-align: center;
            background-color: rgb(241, 236, 241);
        }


        #calendar {
            text-align: center;
            background-color: rgb(241, 236, 241);        }

        button {
            background-color: blue;
        }
    </style>

    <div id="calendar" class="container">
        <div class="row">
            <div class="col-sm-1">
                <hr>9:00 AM
                <hr>
            </div>
            <textarea class="col-sm-10" id="9text" name="9text" rows="4" cols="50"
                ></textarea>
            <button id="9button" class="col-sm-1" type="button" data-text-id="9text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>10:00 AM
                <hr>
            </div>
            <textarea class="col-sm-10" id="10text" name="10text" rows="4" cols="50"></textarea>
            <button id="10button" class="col-sm-1" type="button" data-text-id="10text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>11:00 AM
                <hr>
            </div>
            <textarea class="col-sm-10" id="11text" name="11text" rows="4" cols="50"></textarea>
            <button id="11button" class="col-sm-1" type="button" data-text-id="11text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>12:00 AM
                <hr>
            </div>
            <textarea class="col-sm-10" id="12text" name="12text" rows="4" cols="50"></textarea>
            <button id="12button" class="col-sm-1" type="button" data-text-id="12text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>1:00 PM
                <hr>
            </div>
            <textarea class="col-sm-10" id="13text" name="13text" rows="4" cols="50"
                ></textarea>
            <button id="13button" class="col-sm-1" type="button" data-text-id="13text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>2:00 PM
                <hr>
            </div>
            <textarea class="col-sm-10" id="14text" name="14text" rows="4" cols="50"
></textarea>
            <button id="14button" class="col-sm-1" type="button" data-text-id="14text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>3:00 PM
                <hr>
            </div>
            <textarea class="col-sm-10" id="15text" name="15text" rows="4" cols="50"></textarea>
            <button id="15button" class="col-sm-1" type="button" data-text-id="15text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>4:00 PM
                <hr>
            </div>
            <textarea class="col-sm-10" id="16text" name="16text" rows="4" cols="50"></textarea>
            <button id="16button" class="col-sm-1" type="button" data-text-id="16text">Save</button>
        </div>
        <div class="row">
            <div class="col-sm-1">
                <hr>5:00 PM
                <hr>
            </div>
            <textarea class="col-sm-10" id="17text" name="17text" rows="4" cols="50"></textarea>
            <button id="17button" class="col-sm-1" type="button" data-text-id="17text">Save</button>
        </div>
    </div>


    <script type="text/javascript">
        $(document).ready(function () {
            $("#9text").text(localStorage.getItem("9text"));
            $("#10text").text(localStorage.getItem("10text"));
            $("#11text").text(localStorage.getItem("11text"));
            $("#12text").text(localStorage.getItem("12text"));
            $("#13text").text(localStorage.getItem("13text"));
            $("#14text").text(localStorage.getItem("14text"));
            $("#15text").text(localStorage.getItem("15text"));
            $("#16text").text(localStorage.getItem("16text"));
            $("#17text").text(localStorage.getItem("17text"));

        });

        $("#scheduler").html("<h1>Work Day Scheduler</h1>");


        // jQuery alternative to: var newDiv = document.createElement("div");
        var headingDiv = $("<div>");

        // jQuery alternative to: newDiv.textContent = "A pleasure to meet you!";
        headingDiv.text("A simple calendar app for scheduling your day");

        // jQuery alternative to: document.querySelector("#scheduler").appendChild(newDiv);
        $("#scheduler").append(headingDiv);

        rows = document.getElementsByClassName("col-sm-10");
            let currentHour = parseInt(moment().format('H'));

            Array.from(rows).forEach(row => {
                let
                    rowIdString = row.id,
                    rowHour;
                if (rowIdString) {
                    rowHour = parseInt(rowIdString);
                }
                if (rowHour) {
                    // Compares row id to current hour and sets color accordingly
                    if (currentHour === rowHour) {
                        setColor(row, "red");
                    } else if ((currentHour < rowHour) && (currentHour > rowHour - 9)) {
                        setColor(row, "green");
                    } else if ((currentHour > rowHour) && (currentHour < rowHour + 9)) {
                        setColor(row, "lightgrey");
                    } 
                    
                }
            });

            function setColor(element, color) {
                element.style.backgroundColor = color;
            }

        var todayDateDiv = $("<div>");
        todayDateDiv.html("<b>" + moment().format("dddd, MMMM Do") + "</b>");
        $("#scheduler").append(todayDateDiv);

        $('#calendar').click(function (event) {
            var element = event.target;
            if (element.nodeName == "BUTTON") {
                var textElementId = element.getAttribute('data-text-id');
                var textValue = document.getElementById(textElementId).value;
                localStorage.setItem(textElementId, textValue);
            }
             

        });

    </script>

</body>

</html>